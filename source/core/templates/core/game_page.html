{% extends 'core/base.html' %}

{% load static %}

{% block page_class %}game-page{% endblock %}

{% block static %}
    {{ block.super }}

    <script>
        pywars.game.stateUrl = "{% url 'core-game-state-feed' game.pk %}";
        pywars.game.init();
    </script>
{% endblock %}

{% block content %}
    {% if game.is_started and user_role != game.ROLE_OBSERVER %}
        {{ game.get_player_1 }} vs {{ game.get_player_2 }}
    {% elif user_role != game.ROLE_OBSERVER %}
        {% if user_role == game.ROLE_PLAYER_1 %}
            {{ game.get_player_1 }} vs Waiting for oponent...
        {% else %}
            {{ game.get_player_1 }} vs
            <form method="post" action="{% url 'core-join-game-action' game.pk %}">
                {% csrf_token %}
                {{ join_game_form }}
                <input type="submit" value="Join game" />
            </form>
        {% endif %}
    {% else %}
        Go away!
    {% endif %}
{% endblock %}